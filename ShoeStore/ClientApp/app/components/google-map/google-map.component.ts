import { Component, OnInit } from '@angular/core';
import { House } from "../../models/house";
import { Location } from "../../models/Location";
import { HouseService } from "../../services/house.service";
import { DataTransferService } from "../../services/data-transfer.service";

@Component({
  selector: 'app-google-map',
  templateUrl: './google-map.component.html',
  styleUrls: ['./google-map.component.css']
})
export class GoogleMapComponent implements OnInit {
    location: Location = {
        latitude: 47.805838,
        longitude: -122.257385
    };
    zoom: number = 10;
    houses: any[];
    icon = {
        url:
            "data:image/png;base64,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",
        scaledSize: {
            width: 20,
            height: 20
        }
    };

    constructor(
        private houseService: HouseService,
        private dataService: DataTransferService) { }

    ngOnInit() {
        this.dataService.currentHouses.subscribe(houses => this.houses = houses);
        var filter = {};
        this.dataService.applyFiltering(filter);

        this.dataService.currentLocation.subscribe(location => this.location = location);
    }

    onMarkerClick(m: any) {
        console.log(m);
    }

}
